<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • naomi</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Changelog" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">naomi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.3.15</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/data-model.html">Naomi data model</a>
    </li>
    <li>
      <a href="../articles/hintr-example.html">Emulate a hintr model run</a>
    </li>
    <li>
      <a href="../articles/model-workflow.html">Naomi Model Workflow Example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      
    </div>

    <div id="naomi-2315" class="section level1">
<h1 class="page-header" data-toc-text="2.3.15">
<a href="#naomi-2315" class="anchor"></a>naomi 2.3.15</h1>
<ul>
<li>Updates to summary report</li>
</ul>
</div>
    <div id="naomi-2314" class="section level1">
<h1 class="page-header" data-toc-text="2.3.14">
<a href="#naomi-2314" class="anchor"></a>naomi 2.3.14</h1>
<ul>
<li>Add alternate example survey data using data from MDHS 2015-16 survey final report.</li>
</ul>
</div>
    <div id="naomi-2313" class="section level1">
<h1 class="page-header" data-toc-text="2.3.13">
<a href="#naomi-2313" class="anchor"></a>naomi 2.3.13</h1>
<ul>
<li>Option to output summary report in French.</li>
</ul>
</div>
    <div id="naomi-2312" class="section level1">
<h1 class="page-header" data-toc-text="2.3.12">
<a href="#naomi-2312" class="anchor"></a>naomi 2.3.12</h1>
<ul>
<li>Fix to summary report to display input ANC data in description.</li>
<li>Ensure summary report pulls most recent calibration options.</li>
<li>Fix <code>validate_calibration_options()</code> typo.</li>
<li>Add <code>option$calibrate_method</code> back into the summary report.</li>
</ul>
</div>
    <div id="naomi-2311" class="section level1">
<h1 class="page-header" data-toc-text="2.3.11">
<a href="#naomi-2311" class="anchor"></a>naomi 2.3.11</h1>
<ul>
<li>Add PEPFAR PSNU ID mapping for MLI, SEN, LBR, GHA, SLE.</li>
</ul>
</div>
    <div id="naomi-2310" class="section level1">
<h1 class="page-header" data-toc-text="2.3.10">
<a href="#naomi-2310" class="anchor"></a>naomi 2.3.10</h1>
<ul>
<li>Add description text for ADR upload to model output metadata.</li>
</ul>
</div>
    <div id="naomi-239" class="section level1">
<h1 class="page-header" data-toc-text="2.3.9">
<a href="#naomi-239" class="anchor"></a>naomi 2.3.9</h1>
<ul>
<li>Add PEPFAR PSNU level for BFA to level 1.</li>
</ul>
</div>
    <div id="naomi-238" class="section level1">
<h1 class="page-header" data-toc-text="2.3.8">
<a href="#naomi-238" class="anchor"></a>naomi 2.3.8</h1>
<ul>
<li>Ensure that log interpolation is non-negative values only by inserting <code><a href="https://rdrr.io/r/base/Extremes.html">pmax(..., 0)</a></code> in function <code>log_lin_approx()</code>. (NAOMI TROUBLESHOOTING #100)</li>
</ul>
</div>
    <div id="naomi-237" class="section level1">
<h1 class="page-header" data-toc-text="2.3.7">
<a href="#naomi-237" class="anchor"></a>naomi 2.3.7</h1>
<ul>
<li>When selecting ART data in <code><a href="../reference/anc_testing_prev_mf.html">artnum_mf()</a></code>, if exact ART quarter is found in the data, filter those data instead of interpolating. This is more efficient and avoids interpolation error if only a single quarter of data are uploaded.</li>
</ul>
</div>
    <div id="naomi-236" class="section level1">
<h1 class="page-header" data-toc-text="2.3.6">
<a href="#naomi-236" class="anchor"></a>naomi 2.3.6</h1>
<ul>
<li>If ART data are not available at both times, do not estimate overall or district-level change in ART coverage. Previously this was only restricted if there were no ART at Time 2; not the case where ART at time 2 but not at time 1.</li>
<li>It no sex-stratified ART data from any source, do not estimate difference between adult female and male ART coverage.</li>
</ul>
</div>
    <div id="naomi-235" class="section level1">
<h1 class="page-header" data-toc-text="2.3.5">
<a href="#naomi-235" class="anchor"></a>naomi 2.3.5</h1>
<ul>
<li>Add PEPFAR Datim UID for Angola.</li>
</ul>
</div>
    <div id="naomi-234" class="section level1">
<h1 class="page-header" data-toc-text="2.3.4">
<a href="#naomi-234" class="anchor"></a>naomi 2.3.4</h1>
<ul>
<li>Hotfix: remove <code>option$calibrate_method</code> from summary report (naomi troubleshooting #76).</li>
</ul>
</div>
    <div id="naomi-233" class="section level1">
<h1 class="page-header" data-toc-text="2.3.3">
<a href="#naomi-233" class="anchor"></a>naomi 2.3.3</h1>
<ul>
<li>Update naomi summary report</li>
<li>Switch to brio for file reading to avoid encoding issues on windows</li>
</ul>
</div>
    <div id="naomi-232" class="section level1">
<h1 class="page-header" data-toc-text="2.3.2">
<a href="#naomi-232" class="anchor"></a>naomi 2.3.2</h1>
<ul>
<li>Add PEPFAR Datim UID for Uganda Arua and Terego districts.</li>
</ul>
</div>
    <div id="naomi-231" class="section level1">
<h1 class="page-header" data-toc-text="2.3.1">
<a href="#naomi-231" class="anchor"></a>naomi 2.3.1</h1>
<ul>
<li>Set default for <code>calibrate_method</code> model option in user interface via JSON metadata.</li>
<li>Fix swapped indicator_code and indicator_id for Data Pack metadata which were swapped.</li>
<li>Refactor [<code><a href="../reference/calibrate_outputs.html">calibrate_outputs()</a></code>]; handle uncertainty ranges for proportion adjustments.</li>
</ul>
</div>
    <div id="naomi-230" class="section level1">
<h1 class="page-header" data-toc-text="2.3.0">
<a href="#naomi-230" class="anchor"></a>naomi 2.3.0</h1>
<ul>
<li>Implement ‘logistic’ scaling option for [<code><a href="../reference/calibrate_outputs.html">calibrate_outputs()</a></code>] such that estimates are adjusted on logistic scale by fine district/sex/age group to ensure proportions do not go above 100%.
<ul>
<li>Note: implementation does not yet handle uncertainty ranges. Those might still go above 100%.</li>
</ul>
</li>
<li>Fix to model calibration for number aware of status to align with proportion aware of status and number unaware of status.</li>
</ul>
</div>
    <div id="naomi-225" class="section level1">
<h1 class="page-header" data-toc-text="2.2.5">
<a href="#naomi-225" class="anchor"></a>naomi 2.2.5</h1>
<ul>
<li>Add BWA, HTI, and COD to PEPFAR Data Pack PSNU list</li>
<li>Fix Datim data element UID for indicator DIAGNOSED_SUBNAT.T_1.</li>
</ul>
</div>
    <div id="naomi-224" class="section level1">
<h1 class="page-header" data-toc-text="2.2.4">
<a href="#naomi-224" class="anchor"></a>naomi 2.2.4</h1>
<ul>
<li>hintr_calibrate will store calibration outputs to new files instead of overwriting existing</li>
</ul>
</div>
    <div id="naomi-223" class="section level1">
<h1 class="page-header" data-toc-text="2.2.3">
<a href="#naomi-223" class="anchor"></a>naomi 2.2.3</h1>
<ul>
<li>Add BEN to PEPFAR Data Pack PSNU list.</li>
</ul>
</div>
    <div id="naomi-222" class="section level1">
<h1 class="page-header" data-toc-text="2.2.2">
<a href="#naomi-222" class="anchor"></a>naomi 2.2.2</h1>
<ul>
<li>Fix summary report map colour scales</li>
</ul>
</div>
    <div id="naomi-221" class="section level1">
<h1 class="page-header" data-toc-text="2.2.1">
<a href="#naomi-221" class="anchor"></a>naomi 2.2.1</h1>
<ul>
<li>Update French translation strings supplied by UNAIDS.</li>
</ul>
</div>
    <div id="naomi-220" class="section level1">
<h1 class="page-header" data-toc-text="2.2.0">
<a href="#naomi-220" class="anchor"></a>naomi 2.2.0</h1>
<ul>
<li><p>Implement survey data likelihood as flexible aggregation over areas / sex / age groups, similar to likelihood for number on ART and ANC testing.</p></li>
<li>
<p>Adjust flexibility of random effects specification based on granularity of available survey data when using aggregate survey data.</p>
<ul>
<li>If only age 15-49 data are available, do not estimate age effects; use Spectrum odds ratio as offset pattern for all ages.</li>
<li>If only both sexes data are available, do not estimate district x sex interaction.</li>
</ul>
</li>
<li><p>Add <em>advanced</em> model option <code>use_survey_aggregate</code> to select use of aggregate uploaded survey dataset.</p></li>
<li>
<p>Reparameterise random effects to be scaled to the linear predictor, as implemented by INLA parameterisation. That is now: mu = beta0 + u_i; u_i ~ N(0, sigma) instead of the previous parameterisation: mu = beta0 + u_i * sigma; u_i ~ N(0, 1).</p>
<p>This does not change the model at all, reduces the fitting time noticeably because the starting values for the linear predictor for the ‘inner optimisation’ step do not change resulting from steps in the hyperparameters.</p>
<p>Implementation for the BYM2 model follows the sparsity preserving conditional parameterisation described by Riebler <em>et al.</em> in Section 3.4.</p>
</li>
<li>
<p>Update PEPFAR Data Pack export:</p>
<ul>
<li>Only return future projection outputs except for <code>art_current</code> for current estimates.</li>
<li>Manually code <code>art_current</code> at current estimates as indicator_code <code>TX_CURR_SUBNAT.R</code>.</li>
<li>Return number aware of status instead of proportion aware of status (DIAGNOSED_SUBNAT.T_1).</li>
</ul>
</li>
<li><p>Update CIV Datim UID mapping for new 113 health districts.</p></li>
</ul>
</div>
    <div id="naomi-2114" class="section level1">
<h1 class="page-header" data-toc-text="2.1.14">
<a href="#naomi-2114" class="anchor"></a>naomi 2.1.14</h1>
<ul>
<li>Add calibration options back in, reverts 2.1.8 changes</li>
</ul>
</div>
    <div id="naomi-2113" class="section level1">
<h1 class="page-header" data-toc-text="2.1.13">
<a href="#naomi-2113" class="anchor"></a>naomi 2.1.13</h1>
<ul>
<li>Report progress back from calibration</li>
</ul>
</div>
    <div id="naomi-2112" class="section level1">
<h1 class="page-header" data-toc-text="2.1.12">
<a href="#naomi-2112" class="anchor"></a>naomi 2.1.12</h1>
<ul>
<li>Update dependency first90 v1.4.2 which ensures backwards compatibility for previous .shiny90 files.</li>
</ul>
</div>
    <div id="naomi-2111" class="section level1">
<h1 class="page-header" data-toc-text="2.1.11">
<a href="#naomi-2111" class="anchor"></a>naomi 2.1.11</h1>
<ul>
<li>Catch error if output package construction returns NA error when calculating quantiles and return the REPORTed indicator that threw error (#180).</li>
<li>Replace unaware_untreated_prop = 1.0 if ART coverage is 100% in a particular Spectrum age group (support ticket 11).</li>
</ul>
</div>
    <div id="naomi-2110" class="section level1">
<h1 class="page-header" data-toc-text="2.1.10">
<a href="#naomi-2110" class="anchor"></a>naomi 2.1.10</h1>
<ul>
<li>Fix new infections scaling. In plotting outputs number of new infections were being inadvertently scaled x100 (reported by Lesotho estimates team).</li>
</ul>
</div>
    <div id="naomi-219" class="section level1">
<h1 class="page-header" data-toc-text="2.1.9">
<a href="#naomi-219" class="anchor"></a>naomi 2.1.9</h1>
<ul>
<li>Increase eppasm dependency to 0.5.9.</li>
</ul>
</div>
    <div id="naomi-218" class="section level1">
<h1 class="page-header" data-toc-text="2.1.8">
<a href="#naomi-218" class="anchor"></a>naomi 2.1.8</h1>
<ul>
<li>Hotfix to move calibration options back to model run. Calibration is too slow to run synchronously and is meaning no other users can use the application whilst calibration is being run - we will disable async calibration in hintr.</li>
</ul>
</div>
    <div id="naomi-217" class="section level1">
<h1 class="page-header" data-toc-text="2.1.7">
<a href="#naomi-217" class="anchor"></a>naomi 2.1.7</h1>
<ul>
<li>In model options:
<ul>
<li>Select most recent household survey for prevalence based on survey_mid_calendar_quarter</li>
<li>Select most recent household survey for art_coverage if data exist</li>
<li>If ANC data exist in the most recent survey year [defaulted for prevalence], default select that year for Time 1 (both prevalence and ART coverage). If no data in that year, do not select default</li>
<li>If ANC data exist in the year 2020, preselect that for ‘Time 2’ in ANC clients, ANC prevalence, and ANC coverage.</li>
</ul>
</li>
</ul>
</div>
    <div id="naomi-216" class="section level1">
<h1 class="page-header" data-toc-text="2.1.6">
<a href="#naomi-216" class="anchor"></a>naomi 2.1.6</h1>
<ul>
<li>Summary report logic error corrected</li>
<li>Patch front end issue if anc_clients_year2 is selected and unselected, resulting in <code>anc_clients_year2</code> passed to model.</li>
<li>Patch issue arising if no ART data is uploaded and R gets confused about an option not supplied due to autocompletion of list$name.</li>
</ul>
</div>
    <div id="naomi-215" class="section level1">
<h1 class="page-header" data-toc-text="2.1.5">
<a href="#naomi-215" class="anchor"></a>naomi 2.1.5</h1>
<ul>
<li>Summary report updated to handle model options from naomi web application</li>
<li>Calibration options unscrambled in get_model_calibration_options() test</li>
</ul>
</div>
    <div id="naomi-214" class="section level1">
<h1 class="page-header" data-toc-text="2.1.4">
<a href="#naomi-214" class="anchor"></a>naomi 2.1.4</h1>
<ul>
<li>Add final number of iterations and duration to model fit progress message.</li>
</ul>
</div>
    <div id="naomi-213" class="section level1">
<h1 class="page-header" data-toc-text="2.1.3">
<a href="#naomi-213" class="anchor"></a>naomi 2.1.3</h1>
<div id="awareness-of-hiv-status" class="section level3">
<h3 class="hasAnchor">
<a href="#awareness-of-hiv-status" class="anchor"></a>Awareness of HIV status</h3>
<ul>
<li><p>If a .shiny90 file is included, the <em>first90</em> package is used to calculate the proportion of untreated PLHIV who are aware of their HIV status by sex and age group.</p></li>
<li><p>To estimate the proportion aware of status at the district, this proportion is applied to the estimated untreated population in each district. This is added to the ART coverage to estimate the total proportion aware of status at district level by age and sex.</p></li>
<li>
<p>New output indicators for awarness of HIV status:</p>
<ul>
<li>
<code>untreated_plhiv_num</code>: Number of untreated PLHIV (the ‘treatment gap’).</li>
<li>
<code>aware_plhiv_prop</code>: Proportion of PLHIV aware of HIV positive status (‘first 90’ indicator).</li>
<li>
<code>unaware_plhiv_num</code>: Number of PLHIV who are not aware of their HIV positive status.</li>
</ul>
</li>
<li><p>Add model option <code>output_aware_plhiv</code> in ‘Advanced options’. If no <code>.shiny90</code> file is present in the PJNZ, this must be set to <code>FALSE</code>. An error is raised by <code><a href="../reference/validate_model_options.html">validate_model_options()</a></code> prompting this if no <code>.shiny90</code> file is found inside the PJNZ.</p></li>
</ul>
</div>
<div id="pepfar-data-pack" class="section level3">
<h3 class="hasAnchor">
<a href="#pepfar-data-pack" class="anchor"></a>PEPFAR Data Pack</h3>
<ul>
<li>Update PEFPAR datapack export to conform to 2021 Data Pack specification.</li>
</ul>
</div>
<div id="additional-changes" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-changes" class="anchor"></a>Additional changes</h3>
<ul>
<li>Update demo datasets to distinguish clearly from Malawi. Rename files as <code>demo_</code> and affix <code>_demo</code> to the end of the area IDs.</li>
<li>Add argument <code><a href="https://rdrr.io/r/stats/quantile.html">quantile(..., names = FALSE)</a></code> in the funciton <code>add_stats()</code> for computation of posterior quantiles. This gives a decent speedup in producing the outptus package.</li>
</ul>
</div>
</div>
    <div id="naomi-212" class="section level1">
<h1 class="page-header" data-toc-text="2.1.2">
<a href="#naomi-212" class="anchor"></a>naomi 2.1.2</h1>
<ul>
<li>Make running input validation during model run optional</li>
</ul>
</div>
    <div id="naomi-211" class="section level1">
<h1 class="page-header" data-toc-text="2.1.1">
<a href="#naomi-211" class="anchor"></a>naomi 2.1.1</h1>
<ul>
<li>Make ‘Advanced Options’ panel on model options page collapsible by default</li>
<li>Add option for outputting awareness of HIV status in ‘Advanced options’.</li>
<li>Change “Population calibration options” to “Population calibration” for consistent with other block labels.</li>
</ul>
</div>
    <div id="naomi-210" class="section level1">
<h1 class="page-header" data-toc-text="2.1.0">
<a href="#naomi-210" class="anchor"></a>naomi 2.1.0</h1>
<p>This release revises the modelling of ANC prevalence and ART coverage and produces outputs for district-level ANC testing cascade.</p>
<div id="anc-testing-cascade" class="section level3">
<h3 class="hasAnchor">
<a href="#anc-testing-cascade" class="anchor"></a>ANC testing cascade</h3>
<ul>
<li><p>Add ANC bias parameters to age-specific prevalence and ART coverage regression equations instead of to aggregate ANC prevalence and ART coverage.</p></li>
<li><p>ANC prevalence and ANC ART coverage outputs are produced by five-year age group, 15-24, 25-34, 35-49, and all ages.</p></li>
<li>
<p>New output indicators for ANC testing cascade:</p>
<ul>
<li>
<code>anc_clients</code>: Number of ANC1 clients.</li>
<li>
<code>anc_plhiv</code>: Number of HIV positive ANC attendees.</li>
<li>
<code>anc_already_art</code>: Number of ANC clients already on ART prior to first ANC visit.</li>
<li>
<code>anc_art_new</code>: Number of HIV positive ANC attendees initiating ART.</li>
<li>
<code>anc_known_pos</code>: Number of HIV positive ANC attendees aware of HIV status prior to first ANC.</li>
<li>
<code>anc_tested_pos</code>: Number of HIV positive ANC attendees tested HIV positive during ANC.</li>
<li>
<code>anc_known_pos</code>: Number of HIV negative ANC attendees.</li>
</ul>
<p>Currently these indicators are calculated assuming that the number of ‘known positive’ ANC attendees are the same as the number already on ART.</p>
</li>
<li>
<p>Added a likelihood for the number of ANC clients observed in current year as a function of district population size, age-specific ferility rate (fixed inputs), and a district-level random effect to scale overall fertility rate.</p>
<ul>
<li>The number of months reflected in ANC client reporting is used as an offset for the number of clients such that predicted number of clients are projected annual total.</li>
<li>Results explicitly represent <strong>number of ANC clients</strong>, calibrated based on the number in the current year data. No distinction between number of births versus ANC clients are made. Results should not be used for estimating PMTCT coverage (for example).</li>
<li>Currently only a single time point is used for ANC clients estimates and projections. The future projection is closely linked to the accuracy of current year data; uncertainty around the estimate and projection are not appropriately quantified.</li>
</ul>
</li>
<li><p>Age-specific fertility rate ratios (FRR) for HIV positive relative to HIV negative pregnant women and women already on ART relative to untreated HIV positive women are calculated from Spectrum model outputs (using EPP-ASM simulation) and included in regression equations for ANC prevalence and ANC ART coverage, respectively.</p></li>
<li>
<p>Aggregation of ANC testing data observations generalized using same approach as aggregation of number currently on ART observations. This means that:</p>
<ul>
<li>ANC testing observations can be input for coarser areas, for example admin 1.</li>
<li>Age-stratified ANC testing data can be input, for example 5-year age groups.</li>
</ul>
<p>Age-stratified ANC testing do not yet inform national or district level estimates for age-specific fertility or HIV/ART fertility rate ratios.</p>
</li>
</ul>
<p>Additional changes:</p>
<ul>
<li><p>Use Kish effective sample size in likelihood for household survey data.</p></li>
<li><p>Update summary report with additional styling, number formatting, and methods overview.</p></li>
<li><p>Streamline function <code><a href="../reference/extract_pjnz_naomi.html">extract_pjnz_naomi()</a></code> to reduce the number of calls to unzip and read .DP file by getting all outputs from [<code>eppasm::read_hivproj_output()</code>] which was utilised; remove dependency on <code>specio</code>.</p></li>
</ul>
</div>
</div>
    <div id="naomi-207" class="section level1">
<h1 class="page-header" data-toc-text="2.0.7">
<a href="#naomi-207" class="anchor"></a>naomi 2.0.7</h1>
<ul>
<li>Slight text edits to ANC model options block labels.</li>
<li>Add <code>area_name</code> field to example datasets, conforming to ADR schemas.</li>
<li>Remove survey data preparation functions. Added to <code>naomi.utils</code> package.</li>
</ul>
</div>
    <div id="naomi-206" class="section level1">
<h1 class="page-header" data-toc-text="2.0.6">
<a href="#naomi-206" class="anchor"></a>naomi 2.0.6</h1>
<ul>
<li>Updates to ‘Model Options’ page in Naomi application:
<ul>
<li>Update default ‘current estimates’ calendar quarter to December 2020.</li>
<li>Move ‘short-term projections’ calendar quarter to General options block.</li>
<li>Add drop down to select ‘number of months’ included in ANC testing data reporting.</li>
<li>Add select option to use Kish design effect in survey data likelihood.</li>
<li>Select most recent <code>survey_mid_calendar_quarter</code> as survey run option.</li>
</ul>
</li>
</ul>
</div>
    <div id="naomi-205" class="section level1">
<h1 class="page-header" data-toc-text="2.0.5">
<a href="#naomi-205" class="anchor"></a>naomi 2.0.5</h1>
<ul>
<li>Report iteration number and elapsed time from model fit</li>
</ul>
</div>
    <div id="naomi-204" class="section level1">
<h1 class="page-header" data-toc-text="2.0.4">
<a href="#naomi-204" class="anchor"></a>naomi 2.0.4</h1>
<ul>
<li>Tidy model options layout and tooltip text</li>
</ul>
</div>
    <div id="naomi-203" class="section level1">
<h1 class="page-header" data-toc-text="2.0.3">
<a href="#naomi-203" class="anchor"></a>naomi 2.0.3</h1>
<ul>
<li>Remove utility functions for creating area datasets: <code>check_boundaries()</code>, <code>compare_boundaries()</code>, and <code>gather_areas()</code>.</li>
<li>Add <code>area_name</code> field to survey indicators dataset prepared by <code>calc_survey_indicators()</code>.</li>
</ul>
</div>
    <div id="naomi-202" class="section level1">
<h1 class="page-header" data-toc-text="2.0.2">
<a href="#naomi-202" class="anchor"></a>naomi 2.0.2</h1>
<ul>
<li>Supply default <code>"none"</code> calibration options in <code><a href="../reference/hintr_run_model.html">hintr_run_model()</a></code> if calibration options are not specified in the options list.</li>
</ul>
</div>
    <div id="naomi-201" class="section level1">
<h1 class="page-header" data-toc-text="2.0.1">
<a href="#naomi-201" class="anchor"></a>naomi 2.0.1</h1>
<ul>
<li>Remove calibration options from model run options</li>
</ul>
</div>
    <div id="naomi-200" class="section level1">
<h1 class="page-header" data-toc-text="2.0.0">
<a href="#naomi-200" class="anchor"></a>naomi 2.0.0</h1>
<p>Version 2.0 established for 2021 UNAIDS estimates. Changes are not guaranteed to be backward compatible with 2020 version of Naomi model.</p>
<ul>
<li>Update age group codes to <code>YXXX_XXX</code>.</li>
<li>Chage <code>age_group_label</code> from 00-04 to 0-4 and 05-09 to 5-9.</li>
<li>Remove <code>age_group_id</code>, <code>indicator_id</code>, and <code>quarter_id</code> column from output package.</li>
<li>Rename columns in datasets for consistency with Fjelltop UNAIDS data inputs package:
<ul>
<li>ANC testing dataset: <code>ancrt_*</code> changed to <code>anc_*</code>.</li>
<li>ART programme data: <code>current_art</code> changed to <code>art_current</code> and <code>art_new</code> column added.</li>
<li>Survey HIV indicators: make several column names more human readable.</li>
</ul>
</li>
<li>Add Kish effective sample size approximation (<code>sum(weights) ^ 2 / sum(weights ^ 2)</code>) to survey indicators dataset in field <code>n_eff_kish</code>.</li>
<li>Harmonise indicator names in survey dataset with outputs (<code>prevalence</code>, <code>art_coverage</code>).</li>
<li>Rename calculated ANC input indicators to <code>anc_prevalence</code> and <code>anc_art_coverage</code>.</li>
<li>Harmonise ART number output indicators with ART input data indicators:
<ul>
<li>
<code>art_num_attend</code> becomes <code>art_current</code>.</li>
<li>
<code>art_num_residents</code> becomes <code>art_current_residents</code>.</li>
</ul>
</li>
</ul>
<p>Internal changes:</p>
<ul>
<li>Move several metadata tables to CSV tables saved in <code>inst/metadata/</code> rather than scripted functions.
<ul>
<li>
<code>meta_age_group.csv</code> accessed by <code><a href="../reference/get_age_groups.html">get_age_groups()</a></code>.</li>
<li>
<code>meta_indicator.csv</code> accessed by <code><a href="../reference/get_meta_indicator.html">get_meta_indicator()</a></code>.</li>
<li>Data Pack ID mapping tables: <code>datapack_indicator_mapping.csv</code>, <code>datapack_agegroup_mapping.csv</code>, <code>datapack_sex_mapping.csv</code>.</li>
</ul>
</li>
</ul>
</div>
    <div id="naomi-1011" class="section level1">
<h1 class="page-header" data-toc-text="1.0.11">
<a href="#naomi-1011" class="anchor"></a>naomi 1.0.11</h1>
<ul>
<li>Add a basic vignette showing example script for running <code><a href="../reference/hintr_run_model.html">hintr_run_model()</a></code> for reproducing web app workflow.</li>
</ul>
</div>
    <div id="naomi-1010" class="section level1">
<h1 class="page-header" data-toc-text="1.0.10">
<a href="#naomi-1010" class="anchor"></a>naomi 1.0.10</h1>
<ul>
<li>Edit <code>summary_report.Rmd</code> to remove <code>age_group_id</code>.</li>
</ul>
</div>
    <div id="naomi-109" class="section level1">
<h1 class="page-header" data-toc-text="1.0.9">
<a href="#naomi-109" class="anchor"></a>naomi 1.0.9</h1>
<ul>
<li>Add summary_report_path to model run for saving summary report</li>
</ul>
</div>
    <div id="naomi-108" class="section level1">
<h1 class="page-header" data-toc-text="1.0.8">
<a href="#naomi-108" class="anchor"></a>naomi 1.0.8</h1>
<ul>
<li>Avoid segfault in <code><a href="../reference/sample_tmb.html">sample_tmb()</a></code> when redoing the sampling with different TMB configuration (different computer/number of set threads) by recreating the pointers if they are missing using <code>obj$retape()</code>.</li>
</ul>
</div>
    <div id="naomi-107" class="section level1">
<h1 class="page-header" data-toc-text="1.0.7">
<a href="#naomi-107" class="anchor"></a>naomi 1.0.7</h1>
<ul>
<li>Return indicator formatting metadata in <code><a href="../reference/get_metadata.html">get_metadata()</a></code> and <code><a href="../reference/get_plotting_metadata.html">get_plotting_metadata()</a></code>
</li>
</ul>
</div>
    <div id="naomi-106" class="section level1">
<h1 class="page-header" data-toc-text="1.0.6">
<a href="#naomi-106" class="anchor"></a>naomi 1.0.6</h1>
<ul>
<li>Import sparse matrix multiplication <code><a href="https://rdrr.io/r/base/matmult.html">%*%</a></code> from <code>Matrix</code> package.</li>
</ul>
</div>
    <div id="naomi-105" class="section level1">
<h1 class="page-header" data-toc-text="1.0.5">
<a href="#naomi-105" class="anchor"></a>naomi 1.0.5</h1>
<ul>
<li>Add <code><a href="../reference/hintr_calibrate.html">hintr_calibrate()</a></code> which takes output and calibration options and runs calibration and returns in hintr output format</li>
</ul>
</div>
    <div id="naomi-104" class="section level1">
<h1 class="page-header" data-toc-text="1.0.4">
<a href="#naomi-104" class="anchor"></a>naomi 1.0.4</h1>
<ul>
<li>Rename summary_path in model run args to coarse_output_path to be more representative of actual output (in preparation for adding summary report)</li>
<li>Add <code>get_calibration_options()</code> to retrieve options for calibration</li>
</ul>
</div>
    <div id="naomi-102" class="section level1">
<h1 class="page-header" data-toc-text="1.0.2">
<a href="#naomi-102" class="anchor"></a>naomi 1.0.2</h1>
<ul>
<li>Patch to <code><a href="../reference/sample_tmb.html">sample_tmb()</a></code> for R 4.0 changes.</li>
</ul>
</div>
    <div id="naomi-100" class="section level1">
<h1 class="page-header" data-toc-text="1.0.0">
<a href="#naomi-100" class="anchor"></a>naomi 1.0.0</h1>
<ul>
<li>Move tmbstan and INLA models to naomi.extensions repo as they add heavyweight dependencies which are not required for the main model to run</li>
</ul>
</div>
    <div id="naomi-0072" class="section level1">
<h1 class="page-header" data-toc-text="0.0.72">
<a href="#naomi-0072" class="anchor"></a>naomi 0.0.72</h1>
<ul>
<li>Added function <code><a href="../reference/create_adj_matrix.html">create_adj_matrix()</a></code> to create an adjacency matrix from a shape file.</li>
<li>Added function <code><a href="../reference/scale_gmrf_precision.html">scale_gmrf_precision()</a></code> to scale precision matrix such that geometric mean of marginal variance is one. This mirrors the behaviour of <code><a href="https://rdrr.io/pkg/INLA/man/scale.model.html">INLA::inla.scale.model()</a></code>.</li>
<li>Remove dependency on INLA package. Now prompted to install if <code>fit_inla()</code> is called and the package is not found.</li>
</ul>
</div>
    <div id="naomi-0071" class="section level1">
<h1 class="page-header" data-toc-text="0.0.71">
<a href="#naomi-0071" class="anchor"></a>naomi 0.0.71</h1>
<ul>
<li>Use <code><a href="https://docs.ropensci.org/rdhs/reference/download_boundaries.html">rdhs::download_boundaries()</a></code> in script <code>data-raw/survey.R</code>. (No change to model or datasets.)</li>
</ul>
</div>
    <div id="naomi-0070" class="section level1">
<h1 class="page-header" data-toc-text="0.0.70">
<a href="#naomi-0070" class="anchor"></a>naomi 0.0.70</h1>
<ul>
<li>Use summary output download function to download a Naomi output package with coarse age groups only: 15-49, 15-64, 15+, 50+, 00+, 00-64, 00-14, 15-24, 25-34, 35-49, 50-64, 65+.</li>
</ul>
</div>
    <div id="naomi-0069" class="section level1">
<h1 class="page-header" data-toc-text="0.0.69">
<a href="#naomi-0069" class="anchor"></a>naomi 0.0.69</h1>
<ul>
<li>Add functions <code><a href="../reference/subset_output_package.html">subset_output_package()</a></code> to subset and re-save a zipped Naomi output package.</li>
</ul>
</div>
    <div id="naomi-0068" class="section level1">
<h1 class="page-header" data-toc-text="0.0.68">
<a href="#naomi-0068" class="anchor"></a>naomi 0.0.68</h1>
<ul>
<li>Pass some metadata back from model run for use in output formatting</li>
</ul>
</div>
    <div id="naomi-0067" class="section level1">
<h1 class="page-header" data-toc-text="0.0.67">
<a href="#naomi-0067" class="anchor"></a>naomi 0.0.67</h1>
<ul>
<li>Allow passing input data to <code>naomi_run_model</code> either as list of file paths or list of lists each containing a path, hash and filename</li>
</ul>
</div>
    <div id="naomi-0066" class="section level1">
<h1 class="page-header" data-toc-text="0.0.66">
<a href="#naomi-0066" class="anchor"></a>naomi 0.0.66</h1>
<ul>
<li>Allow fitting to ART data to aggregated areas. There is a check that the same model area is not included in more than on area in the ART dataset.</li>
<li>Use logit offsets for ages below which survey data are available. This is principally used for age 0-14 when survey data start at age 15.</li>
<li>Add option <code>rho_paed_15to49f_ratio</code> to calculate paediatric prevalence as ratio of female 15-49 adult prevalence.</li>
<li>Recode string is passed by JSON for ANC testing data year as NULL.</li>
</ul>
</div>
    <div id="naomi-0065" class="section level1">
<h1 class="page-header" data-toc-text="0.0.65">
<a href="#naomi-0065" class="anchor"></a>naomi 0.0.65</h1>
<ul>
<li>Fix error in default option for time-varying ART attendance model option in 0.0.64 release.</li>
</ul>
</div>
    <div id="naomi-0064" class="section level1">
<h1 class="page-header" data-toc-text="0.0.64">
<a href="#naomi-0064" class="anchor"></a>naomi 0.0.64</h1>
<ul>
<li>Area random effect for prevalence below age 15 interaction as ICAR model. Implemented as option <code>rho_paed_x_term</code> specified by argument <code><a href="../reference/naomi_model_frame.html">naomi_model_frame(..., rho_paed_x_term = TRUE, ...)</a></code>. Defaualt value is <code>FALSE</code>.</li>
<li>Initialize hyperparameters at prior mode.</li>
<li>Add calibration option for new infections to Spectrum new infections.</li>
<li>Update default Spectrum calibration option to “national”.</li>
<li>Update default time-varying ART attendance “yes”.</li>
</ul>
</div>
    <div id="naomi-0063" class="section level1">
<h1 class="page-header" data-toc-text="0.0.63">
<a href="#naomi-0063" class="anchor"></a>naomi 0.0.63</h1>
<ul>
<li>Change age_group_label for ages 0-4 and 5-9 to 00-04 and 05-09 for Data Pack.</li>
</ul>
</div>
    <div id="naomi-0062" class="section level1">
<h1 class="page-header" data-toc-text="0.0.62">
<a href="#naomi-0062" class="anchor"></a>naomi 0.0.62</h1>
<ul>
<li>Better error messages with pjnz/geojson mismatch</li>
</ul>
</div>
    <div id="naomi-0061" class="section level1">
<h1 class="page-header" data-toc-text="0.0.61">
<a href="#naomi-0061" class="anchor"></a>naomi 0.0.61</h1>
<ul>
<li>Add country-specific colour scales for WCA countries.</li>
</ul>
</div>
    <div id="noami-0059" class="section level1">
<h1 class="page-header" data-toc-text="0.0.59">
<a href="#noami-0059" class="anchor"></a>noami 0.0.59</h1>
<ul>
<li>Accept semicolon delimited files</li>
</ul>
</div>
    <div id="noami-0058" class="section level1">
<h1 class="page-header" data-toc-text="0.0.58">
<a href="#noami-0058" class="anchor"></a>noami 0.0.58</h1>
<ul>
<li>Small fix to tests: model options.</li>
</ul>
</div>
    <div id="naomi-0057" class="section level1">
<h1 class="page-header" data-toc-text="0.0.57">
<a href="#naomi-0057" class="anchor"></a>naomi 0.0.57</h1>
<p>Formatting updates requested for Data Pack 2019:</p>
<ul>
<li>Change age_group_label for ages &lt;1 and 1-4 to &lt;01 and 01-04.</li>
<li>Change dataelement UIDs for TX_CURR_SUBNAT and PLHIV.</li>
</ul>
</div>
    <div id="naomi-0056" class="section level1">
<h1 class="page-header" data-toc-text="0.0.56">
<a href="#naomi-0056" class="anchor"></a>naomi 0.0.56</h1>
<ul>
<li>Replace <code>survey_year</code> with <code>survey_mid_calendar_quarter</code> in the survey indicators dataset.</li>
<li>Add column <code>restype</code> for urban/rural to survey indicators datasets and option to stratify survey indicators calculation by urban/rural.</li>
</ul>
</div>
    <div id="naomi-0055" class="section level1">
<h1 class="page-header" data-toc-text="0.0.55">
<a href="#naomi-0055" class="anchor"></a>naomi 0.0.55</h1>
<ul>
<li>Option for time-varying ART attendance odds ratio. The option <code>artattend_t2</code> can be set to TRUE if there is evidence that patterns of cross-district ART attendance changed for the period before the survey and the inter-survey period.</li>
</ul>
</div>
    <div id="naomi-0054" class="section level1">
<h1 class="page-header" data-toc-text="0.0.54">
<a href="#naomi-0054" class="anchor"></a>naomi 0.0.54</h1>
<ul>
<li>Add output stratification for age groups &lt;1, 1-4. This is simply disaggregated based on proportions from Spectrum with now uncertainty.</li>
<li>Add function <code>export_datapack()</code> to export an output package to datapack CSV format.</li>
</ul>
</div>
    <div id="naomi-0053" class="section level1">
<h1 class="page-header" data-toc-text="0.0.53">
<a href="#naomi-0053" class="anchor"></a>naomi 0.0.53</h1>
<ul>
<li>Do not calculate reported output aggregations during model fitting. This should modestly reduce model objective function computation time.</li>
<li>Output projection to a third calendar quarter. Projection outputs are computed after objective function calcuation. Predicted ANC attendance at time 3 is not computed.</li>
</ul>
</div>
    <div id="naomi-0052" class="section level1">
<h1 class="page-header" data-toc-text="0.0.52">
<a href="#naomi-0052" class="anchor"></a>naomi 0.0.52</h1>
<ul>
<li>Automatically remove rows with all NA values in <code>read_*()</code> functions.</li>
<li>Remove extraneous argument area_merged from output.</li>
</ul>
</div>
    <div id="naomi-0051" class="section level1">
<h1 class="page-header" data-toc-text="0.0.51">
<a href="#naomi-0051" class="anchor"></a>naomi 0.0.51</h1>
<ul>
<li>Add optional approximate design effect to scale effective sample size for survey prevalence, art coverage, and proportion recent observations.</li>
</ul>
</div>
    <div id="naomi-0050" class="section level1">
<h1 class="page-header" data-toc-text="0.0.50">
<a href="#naomi-0050" class="anchor"></a>naomi 0.0.50</h1>
<ul>
<li>Add spatial interaction to ART coverage model for &lt;15 / 15+ to allow different paediatric vs. adult ART coverage and different change in paediatric coverage. This reduces paediatric ART data distorting adult model results.</li>
<li>ART number dataset accepts either year or calendar_quarter column.</li>
<li>Linearly interpolate number on ART for model fitting. If desired quarter is before earliest data, the earliest ART number may be carried backward by up to four quarters. Number on ART are never carried forwards.</li>
</ul>
</div>
    <div id="naomi-0049" class="section level1">
<h1 class="page-header" data-toc-text="0.0.49">
<a href="#naomi-0049" class="anchor"></a>naomi 0.0.49</h1>
<ul>
<li>Properly age new infections between time 1 and time 2 based on ageing and incidecne trend from Spectrum.</li>
<li>Add new paediatric HIV infections betwen time 1 and time 2 proportional to HIV survivors by age and prevalence among women age 15-49 in Spectrum.</li>
</ul>
</div>
    <div id="naomi-0048" class="section level1">
<h1 class="page-header" data-toc-text="0.0.48">
<a href="#naomi-0048" class="anchor"></a>naomi 0.0.48</h1>
<ul>
<li>Add default values for area level and calendar quarter to generate estiamtes for</li>
</ul>
</div>
    <div id="naomi-0047" class="section level1">
<h1 class="page-header" data-toc-text="0.0.47">
<a href="#naomi-0047" class="anchor"></a>naomi 0.0.47</h1>
<ul>
<li>Add read_***() functions with col_type parsers.</li>
</ul>
</div>
    <div id="naomi-0046" class="section level1">
<h1 class="page-header" data-toc-text="0.0.46">
<a href="#naomi-0046" class="anchor"></a>naomi 0.0.46</h1>
<ul>
<li>Add TMB-Stan model fitting, with and without Laplace approximation.</li>
<li>Add INLA model fitting.</li>
</ul>
<p>This is for development and comparison purposes, not for production use.</p>
</div>
    <div id="naomi-0045" class="section level1">
<h1 class="page-header" data-toc-text="0.0.45">
<a href="#naomi-0045" class="anchor"></a>naomi 0.0.45</h1>
<ul>
<li>Remove age_group_id, indicator_id, and quarter_id from model frames; use human readable age_group, indicator, and calendar_quarter everywhere.</li>
<li>Output number of ART attendees between every district pair. Currently output at estimation level only.</li>
<li>spread_areas() allows an sf object as argument and returns boundaries for wide format areas if provided.</li>
<li>No sex differences in prevalence, ART coverage, or incidence for age below 15 years.</li>
<li>Cap Spectrum ART coverage between 0.001 and 0.999 to avoid logit transformation NaN errors.</li>
</ul>
</div>
    <div id="naomi-0044" class="section level1">
<h1 class="page-header" data-toc-text="0.0.44">
<a href="#naomi-0044" class="anchor"></a>naomi 0.0.44</h1>
<ul>
<li>Change ART indicator labels to “ART Number (residents)” and “ART Number (attending)”.</li>
</ul>
</div>
    <div id="naomi-0043" class="section level1">
<h1 class="page-header" data-toc-text="0.0.43">
<a href="#naomi-0043" class="anchor"></a>naomi 0.0.43</h1>
<ul>
<li>Check that esimates quarter (time 2) is greater than survey quarter (time 1).</li>
</ul>
</div>
    <div id="naomi-0042" class="section level1">
<h1 class="page-header" data-toc-text="0.0.42">
<a href="#naomi-0042" class="anchor"></a>naomi 0.0.42</h1>
<ul>
<li>Add more translations</li>
</ul>
</div>
    <div id="naomi-0041" class="section level1">
<h1 class="page-header" data-toc-text="0.0.41">
<a href="#naomi-0041" class="anchor"></a>naomi 0.0.41</h1>
<ul>
<li>Separate PLHIV projection and incidence calculation.</li>
</ul>
</div>
    <div id="naomi-0040" class="section level1">
<h1 class="page-header" data-toc-text="0.0.40">
<a href="#naomi-0040" class="anchor"></a>naomi 0.0.40</h1>
<ul>
<li>Cap ART coverage by age/sex from Spectrum between 0.1% and 99.9% to avoid logit difference evaluating to +/-Inf.</li>
</ul>
</div>
    <div id="naomi-0039" class="section level1">
<h1 class="page-header" data-toc-text="0.0.39">
<a href="#naomi-0039" class="anchor"></a>naomi 0.0.39</h1>
<ul>
<li>Set Mozambique colour scales</li>
</ul>
</div>
    <div id="naomi-0038" class="section level1">
<h1 class="page-header" data-toc-text="0.0.38">
<a href="#naomi-0038" class="anchor"></a>naomi 0.0.38</h1>
<ul>
<li>If there is no ART data at time 2, use logit change in ART coverage between time 1 and time 2 from Spectrum to approximate change in ART coverage. Do not estimate non-identifiable parameters.</li>
</ul>
</div>
    <div id="naomi-0037" class="section level1">
<h1 class="page-header" data-toc-text="0.0.37">
<a href="#naomi-0037" class="anchor"></a>naomi 0.0.37</h1>
<ul>
<li>Use Spectrum estimates at time 1 for transmission rate defaults (mrc-1236).</li>
</ul>
</div>
    <div id="naomi-0036" class="section level1">
<h1 class="page-header" data-toc-text="0.0.36">
<a href="#naomi-0036" class="anchor"></a>naomi 0.0.36</h1>
<ul>
<li>Reverse order of ANC and ART sections</li>
<li>Move artattend_log_gamma_offset into the advanced section</li>
</ul>
</div>
    <div id="naomi-0035" class="section level1">
<h1 class="page-header" data-toc-text="0.0.35">
<a href="#naomi-0035" class="anchor"></a>naomi 0.0.35</h1>
<ul>
<li>Throw error if trying to fit model at country level (mrc-1233).</li>
</ul>
</div>
    <div id="naomi-0034" class="section level1">
<h1 class="page-header" data-toc-text="0.0.34">
<a href="#naomi-0034" class="anchor"></a>naomi 0.0.34</h1>
<ul>
<li>Change quarter labels from range to end quarter (“Jan - Mar 2019” -&gt; “March 2019”).</li>
</ul>
</div>
    <div id="naomi-0033" class="section level1">
<h1 class="page-header" data-toc-text="0.0.33">
<a href="#naomi-0033" class="anchor"></a>naomi 0.0.33</h1>
<ul>
<li>Implement ANC prevalence and ART coverage for all areas.</li>
<li>Add ANC prevalence and ART coverage to indicators outputs. Note: currently this si implemented only for age 15-49 at the level of model fitting. This should enable comparisons with input data. Later this can be extended for higher level aggregations.</li>
</ul>
</div>
    <div id="naomi-0032" class="section level1">
<h1 class="page-header" data-toc-text="0.0.32">
<a href="#naomi-0032" class="anchor"></a>naomi 0.0.32</h1>
<ul>
<li>Add receiving ART output indicator</li>
</ul>
</div>
    <div id="naomi-0031" class="section level1">
<h1 class="page-header" data-toc-text="0.0.31">
<a href="#naomi-0031" class="anchor"></a>naomi 0.0.31</h1>
<ul>
<li>Fix validation bug caused by missing programme options</li>
</ul>
</div>
    <div id="naomi-0030" class="section level1">
<h1 class="page-header" data-toc-text="0.0.30">
<a href="#naomi-0030" class="anchor"></a>naomi 0.0.30</h1>
<ul>
<li>Undo ANC prevalence and ART coverage at time 2 which errors for different areas at two time points. Fix coming later.</li>
</ul>
</div>
    <div id="naomi-0029" class="section level1">
<h1 class="page-header" data-toc-text="0.0.29">
<a href="#naomi-0029" class="anchor"></a>naomi 0.0.29</h1>
<ul>
<li>Patch model validation for options$include_art_t1 = NULL.</li>
</ul>
</div>
    <div id="naomi-0028" class="section level1">
<h1 class="page-header" data-toc-text="0.0.28">
<a href="#naomi-0028" class="anchor"></a>naomi 0.0.28</h1>
<ul>
<li>Model for ANC prevalence and ART coverage at time 2.</li>
<li>Drop ANC observations that have NA for any required inputs.</li>
</ul>
</div>
    <div id="naomi-0027" class="section level1">
<h1 class="page-header" data-toc-text="0.0.27">
<a href="#naomi-0027" class="anchor"></a>naomi 0.0.27</h1>
<ul>
<li>Explicit type conversion of integer and logical model options.</li>
</ul>
</div>
    <div id="naomi-0025" class="section level1">
<h1 class="page-header" data-toc-text="0.0.25">
<a href="#naomi-0025" class="anchor"></a>naomi 0.0.25</h1>
<ul>
<li>Carry forward / backward interpolated population if uploaded population does not span years required.</li>
</ul>
</div>
    <div id="naomi-0025-1" class="section level1">
<h1 class="page-header" data-toc-text="0.0.25">
<a href="#naomi-0025-1" class="anchor"></a>naomi 0.0.25</h1>
<ul>
<li>Remove spectrum calibration option validation – NULLs not handled appropriately.</li>
</ul>
</div>
    <div id="naomi-0024" class="section level1">
<h1 class="page-header" data-toc-text="0.0.24">
<a href="#naomi-0024" class="anchor"></a>naomi 0.0.24</h1>
<ul>
<li>Hide placeholder &lt;1 / 1-4 outputs which are not implemented yet.</li>
<li>Handle case where ANC testing provided but no year selected (valid) or where a year is requested not found in data (error) (mrc-1176)</li>
</ul>
</div>
    <div id="naomi-0023" class="section level1">
<h1 class="page-header" data-toc-text="0.0.23">
<a href="#naomi-0023" class="anchor"></a>naomi 0.0.23</h1>
<ul>
<li>Implement pre-fitting calibration to Spectrum population size by sex and 5-year age group.</li>
<li>Implement post-fitting calibration to Spectrum PLHIV and number on ART.</li>
<li>Save Spectrum calibration in <code>fit/spectrum_calibration.csv</code> in the ouput zip download.</li>
</ul>
</div>
    <div id="naomi-0022" class="section level1">
<h1 class="page-header" data-toc-text="0.0.22">
<a href="#naomi-0022" class="anchor"></a>naomi 0.0.22</h1>
<ul>
<li>Remove ancrt_hiv_status field from ANC testing dataset.</li>
<li>Add parent_area_id and spectrum_region_code to outputs package.</li>
</ul>
</div>
    <div id="naomi-0021" class="section level1">
<h1 class="page-header" data-toc-text="0.0.21">
<a href="#naomi-0021" class="anchor"></a>naomi 0.0.21</h1>
<ul>
<li>Revise ART attendance model to be single district level ‘attractiveness’ parameter.</li>
<li>Add model input validation step to hintr_run_model().</li>
<li>Implement random number seed argument to sample_tmb() to return exact same results.</li>
<li>Silent fitting for hintr_run_model() unless option outer_verbose = TRUE or inner_verbose = TRUE.</li>
<li>Specify maximum number of iterations for fit_tmb().</li>
<li>Warning if fit_tmb() convergence error.</li>
<li>hintr_run_model() throw error if convergence error, unless option$permissive = TRUE.</li>
</ul>
</div>
    <div id="naomi-0020" class="section level1">
<h1 class="page-header" data-toc-text="0.0.20">
<a href="#naomi-0020" class="anchor"></a>naomi 0.0.20</h1>
<ul>
<li>Add function to return 5 year age groups</li>
<li>Support multiple PJNZ extracts in a zip folder.</li>
</ul>
</div>
    <div id="naomi-0019" class="section level1">
<h1 class="page-header" data-toc-text="0.0.19">
<a href="#naomi-0019" class="anchor"></a>naomi 0.0.19</h1>
<ul>
<li>Add age &lt;1 / 1-4 age stratification to outputs.</li>
<li>Add number receiving art in area outputs.</li>
<li>Add ASFR inputs.</li>
<li>Add inputs/options.csv in zipped output package.</li>
</ul>
</div>
    <div id="naomi-0018" class="section level1">
<h1 class="page-header" data-toc-text="0.0.18">
<a href="#naomi-0018" class="anchor"></a>naomi 0.0.18</h1>
<ul>
<li>Use odds ratios from Spectrum to model prevalence and ART coverage above age of data availability.</li>
<li>Save metadata alongside model outputs, when run via the hint run entrypoint (mrc-760)</li>
</ul>
</div>
    <div id="naomi-0017" class="section level1">
<h1 class="page-header" data-toc-text="0.0.17">
<a href="#naomi-0017" class="anchor"></a>naomi 0.0.17</h1>
<ul>
<li>Use annual programme data input instead of quarterly.</li>
<li>Add spectrum_region_code to area hierarchy.</li>
<li>Save metadata alongside model outputs, when run via the hint run entrypoint (mrc-760)</li>
<li>Add advanced model run options</li>
<li>Add skeleton of model input validation</li>
</ul>
</div>
    <div id="naomi-0016" class="section level1">
<h1 class="page-header" data-toc-text="0.0.16">
<a href="#naomi-0016" class="anchor"></a>naomi 0.0.16</h1>
<ul>
<li>Move metadata into directory separate from extdata</li>
<li>Add error_low and error_high columns to metadata</li>
</ul>
</div>
    <div id="naomi-0015" class="section level1">
<h1 class="page-header" data-toc-text="0.0.15">
<a href="#naomi-0015" class="anchor"></a>naomi 0.0.15</h1>
<ul>
<li>Allow passing no of samples in model run options</li>
</ul>
</div>
    <div id="naomi-0014" class="section level1">
<h1 class="page-header" data-toc-text="0.0.14">
<a href="#naomi-0014" class="anchor"></a>naomi 0.0.14</h1>
<ul>
<li>Update progress message</li>
</ul>
</div>
    <div id="naomi-0013" class="section level1">
<h1 class="page-header" data-toc-text="0.0.13">
<a href="#naomi-0013" class="anchor"></a>naomi 0.0.13</h1>
<ul>
<li>Set default args for hintr model run function</li>
</ul>
</div>
    <div id="naomi-0012" class="section level1">
<h1 class="page-header" data-toc-text="0.0.12">
<a href="#naomi-0012" class="anchor"></a>naomi 0.0.12</h1>
<ul>
<li>Wrap model run in single function for use in hintr API</li>
</ul>
</div>
    <div id="naomi-0011" class="section level1">
<h1 class="page-header" data-toc-text="0.0.11">
<a href="#naomi-0011" class="anchor"></a>naomi 0.0.11</h1>
<ul>
<li>Fix issues with naomi model run options schema templates</li>
</ul>
</div>
    <div id="naomi-0010" class="section level1">
<h1 class="page-header" data-toc-text="0.0.10">
<a href="#naomi-0010" class="anchor"></a>naomi 0.0.10</h1>
<ul>
<li>Use iso3 to locate country plotting metadata instead of country name</li>
</ul>
</div>
    <div id="naomi-009" class="section level1">
<h1 class="page-header" data-toc-text="0.0.9">
<a href="#naomi-009" class="anchor"></a>naomi 0.0.9</h1>
<ul>
<li>Plotting metadata now returns default if country is missing from config</li>
</ul>
</div>
    <div id="naomi-008" class="section level1">
<h1 class="page-header" data-toc-text="0.0.8">
<a href="#naomi-008" class="anchor"></a>naomi 0.0.8</h1>
<ul>
<li>Iterate model options endpoint to be able to exclude optional data set options</li>
</ul>
</div>
    <div id="naomi-007" class="section level1">
<h1 class="page-header" data-toc-text="0.0.7">
<a href="#naomi-007" class="anchor"></a>naomi 0.0.7</h1>
<ul>
<li>Add function to return model run options template to build front end declaratively</li>
</ul>
</div>
    <div id="naomi-006" class="section level1">
<h1 class="page-header" data-toc-text="0.0.6">
<a href="#naomi-006" class="anchor"></a>naomi 0.0.6</h1>
<ul>
<li>Iterate metadata to include model outputs</li>
<li>Expose get_metadata function for hintr use</li>
</ul>
</div>
    <div id="naomi-005" class="section level1">
<h1 class="page-header" data-toc-text="0.0.5">
<a href="#naomi-005" class="anchor"></a>naomi 0.0.5</h1>
<ul>
<li>Add function to aggregate multiple Spectrum files.</li>
</ul>
</div>
    <div id="naomi-004" class="section level1">
<h1 class="page-header" data-toc-text="0.0.4">
<a href="#naomi-004" class="anchor"></a>naomi 0.0.4</h1>
<ul>
<li>Allow use of survey VLS data.</li>
</ul>
</div>
    <div id="naomi-003" class="section level1">
<h1 class="page-header" data-toc-text="0.0.3">
<a href="#naomi-003" class="anchor"></a>naomi 0.0.3</h1>
<ul>
<li>Ouput uncertainty ranges based on Monte Carlo simulation from joint covariance matrix of fixed and random effects.</li>
</ul>
</div>
    <div id="naomi-002" class="section level1">
<h1 class="page-header" data-toc-text="0.0.2">
<a href="#naomi-002" class="anchor"></a>naomi 0.0.2</h1>
<ul>
<li>Add function to calculate prevalence and ART coverage from ANC data</li>
</ul>
</div>
    <div id="naomi-001" class="section level1">
<h1 class="page-header" data-toc-text="0.0.1">
<a href="#naomi-001" class="anchor"></a>naomi 0.0.1</h1>
<ul>
<li>Add travis build</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by Jeff Eaton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


